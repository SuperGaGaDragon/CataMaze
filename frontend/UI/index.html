<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CataMaze - Survival Maze Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>CataMaze</h1>
            <div class="game-id-display">
                <span id="game-id-label">No active game</span>
            </div>
        </header>

        <!-- Main Game Area -->
        <main class="game-area">
            <!-- HUD (Heads-Up Display) -->
            <section class="hud">
                <div class="stat-group">
                    <div class="stat">
                        <span class="stat-label">HP</span>
                        <div class="hp-bar">
                            <div class="hp-fill" id="hp-fill"></div>
                            <span class="hp-text" id="hp-text">5/5</span>
                        </div>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Ammo</span>
                        <div class="ammo-bar">
                            <div class="ammo-fill" id="ammo-fill"></div>
                            <span class="ammo-text" id="ammo-text">3/3</span>
                        </div>
                    </div>
                </div>
                <div class="stat-group">
                    <div class="stat">
                        <span class="stat-label">Tick</span>
                        <span class="stat-value" id="tick-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Position</span>
                        <span class="stat-value" id="position-value">(0, 0)</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Queue</span>
                        <span class="stat-value" id="queue-value">0</span>
                    </div>
                </div>
                <div class="stat-group">
                    <div class="stat full-width">
                        <span class="stat-label">Sound</span>
                        <span class="stat-value" id="sound-value">[silence]</span>
                    </div>
                </div>
            </section>

            <!-- Vision Area (5x5 Grid) -->
            <section class="vision">
                <h2>Vision</h2>
                <div class="vision-grid" id="vision-grid">
                    <!-- 5x5 grid cells will be generated dynamically -->
                </div>
            </section>

            <!-- Event Log -->
            <section class="event-log">
                <h2>Event Log</h2>
                <div class="event-list" id="event-list">
                    <p class="event-placeholder">No events yet. Start a new game!</p>
                </div>
            </section>
        </main>

        <!-- Controls -->
        <aside class="controls">
            <div class="control-section">
                <h3>Game Controls</h3>
                <button class="btn btn-primary" id="btn-new-game">New Game</button>
                <button class="btn btn-secondary" id="btn-resume-show">Resume Game</button>
                <button class="btn btn-warning" id="btn-pause-save" style="display: none;">Pause & Save</button>
                <button class="btn btn-secondary" id="btn-observe">Observe</button>
                <button class="btn btn-danger" id="btn-clear-queue">Clear Queue (ESC)</button>
            </div>

            <div class="control-section" id="resume-section" style="display: none;">
                <h3>Resume Game</h3>
                <input type="text" id="input-game-id" placeholder="Enter Game ID..." class="input-game-id">
                <button class="btn btn-primary" id="btn-resume-confirm">Load Game</button>
                <button class="btn btn-secondary" id="btn-resume-cancel">Cancel</button>
                <p class="warning-text">‚ö†Ô∏è Keep your Game ID secret! Anyone with it can control your game.</p>
            </div>

            <div class="control-section">
                <h3>Movement</h3>
                <div class="movement-grid">
                    <button class="btn-move" data-key="w">‚Üë (W)</button>
                    <div class="movement-row">
                        <button class="btn-move" data-key="a">‚Üê (A)</button>
                        <button class="btn-move" data-key="s">‚Üì (S)</button>
                        <button class="btn-move" data-key="d">‚Üí (D)</button>
                    </div>
                </div>
            </div>

            <div class="control-section">
                <h3>Shooting</h3>
                <div class="shooting-grid">
                    <button class="btn-shoot" data-key="i">‚Üë (I)</button>
                    <div class="shooting-row">
                        <button class="btn-shoot" data-key="j">‚Üê (J)</button>
                        <button class="btn-shoot" data-key="k">‚Üì (K)</button>
                        <button class="btn-shoot" data-key="l">‚Üí (L)</button>
                    </div>
                </div>
            </div>

            <div class="control-section">
                <h3>Advanced</h3>
                <button class="btn btn-action" id="btn-tick">Execute Tick</button>
            </div>
        </aside>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-message" id="status-message">
                Ready. Click "New Game" to start!
            </div>
            <div class="status-info">
                <span id="status-alive">Alive: ‚úì</span>
                <span id="status-won">Won: ‚úó</span>
            </div>
        </footer>
    </div>

    <!-- Game Over Modal -->
    <div class="modal" id="game-over-modal">
        <div class="modal-content">
            <h2 id="modal-title">Game Over</h2>
            <p id="modal-message">You died in the maze...</p>
            <button class="btn btn-primary" id="modal-btn-new">New Game</button>
            <button class="btn btn-secondary" id="modal-btn-close">Close</button>
        </div>
    </div>

    <!-- Pause & Save Modal -->
    <div class="modal" id="pause-save-modal">
        <div class="modal-content">
            <h2>‚è∏Ô∏è Game Paused & Saved</h2>
            <p>Your game has been automatically saved.</p>
            <div class="game-id-box">
                <label>Your Game ID:</label>
                <input type="text" id="saved-game-id" readonly class="game-id-input">
                <button class="btn btn-small" id="btn-copy-id">üìã Copy</button>
            </div>
            <p class="warning-text">‚ö†Ô∏è <strong>Keep this ID secret!</strong> Anyone with this ID can resume and control your game.</p>
            <button class="btn btn-primary" id="modal-btn-continue">Continue Playing</button>
            <button class="btn btn-secondary" id="modal-btn-exit">Exit to Menu</button>
        </div>
    </div>

    <script src="main.js?v=20260127-4" type="module"></script>
</body>
</html>
